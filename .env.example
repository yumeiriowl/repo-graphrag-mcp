
# ==============================================================================
# Repo GraphRAG MCP Configuration File
# ==============================================================================
# Copy this file to .env and adjust values to your environment.
# Copy command: cp .env.example .env

# ==============================================================================
# API Keys & Provider Settings (required)
# ==============================================================================
# LLM provider for graph creation
# Available providers: "anthropic", "azure_openai", "openai", "gemini"
GRAPH_CREATE_PROVIDER=graph_create_llm_provider

# LLM provider for planning and query
# Available providers: "anthropic", "azure_openai", "openai", "gemini"
GRAPH_ANALYSIS_PROVIDER=graph_analysis_llm_provider

# Anthropic Claude API key (required when provider=anthropic)
ANTHROPIC_API_KEY=your_anthropic_api_key

# Azure OpenAI API key (required when provider=azure_openai)
AZURE_OPENAI_API_KEY=your_azure_openai_api_key

# Azure OpenAI endpoint (required when provider=azure_openai)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/

# Azure OpenAI API version (required when provider=azure_openai)
AZURE_API_VERSION=azure_openai_api_version

# OpenAI API key (required when provider=openai)
OPENAI_API_KEY=your_openai_api_key

# Google Gemini API key (required when provider=gemini)
GEMINI_API_KEY=your_gemini_api_key

# ==============================================================================
# LLM Model Settings (required)
# ==============================================================================
# LLM model for GraphRAG creation (required)
GRAPH_CREATE_MODEL_NAME=graph_create_model_name

# LLM model for planning/query (required)
GRAPH_ANALYSIS_MODEL_NAME=graph_analysis_model_name

# Max output tokens for LLM during graph creation
# Used for entity extraction, summary generation, etc.
GRAPH_CREATE_MAX_TOKEN_SIZE=4096

# Max output tokens for LLM during planning/query
# Used for generating detailed answers to users.
GRAPH_ANALYSIS_MAX_TOKEN_SIZE=8192

# ==============================================================================
# Embedding Model Settings
# ==============================================================================
# Embedding model name (Hugging Face)
EMBEDDING_MODEL_NAME=BAAI/bge-m3

# Embedding vector dimension
EMBEDDING_DIM=1024

# Max input token size for embedding model
EMBEDDING_MAX_TOKEN_SIZE=2048

# Hugging Face Hub access token (optional)
# Uncomment and set if using an authenticated model.
# HUGGINGFACE_HUB_TOKEN=your_hf_token

# ==============================================================================
# Performance Settings
# ==============================================================================
# Parallelism (concurrent LLM API/embedding/analysis)
# Used as LightRAG's parallel execution count and RateLimiter concurrency cap.
# Increasing speeds up processing but risks provider rate limits/throttling.
# Tune with `RATE_LIMIT_MIN_INTERVAL` and `RATE_LIMIT_ERROR_WAIT_TIME`.
# Guideline: personal/small=2–4, ample resources=4–8
PARALLEL_NUM=3

# Max tokens per chunk (upper bound for splitting documents/code)
# Set to <= `EMBEDDING_MAX_TOKEN_SIZE` and leave headroom for the LLM context.
CHUNK_MAX_TOKENS=2048

# Max depth of nodes explored by Tree-sitter
MAX_DEPTH=30

# Minimum interval between API requests (seconds)
RATE_LIMIT_MIN_INTERVAL=1.0

# Wait time when hitting API rate limits (seconds)
RATE_LIMIT_ERROR_WAIT_TIME=3.0

# ==============================================================================
# Planning/Query Settings
# ==============================================================================
## These settings are used by planning and query (graph_plan, graph_query)
## to control retrieval and context budgeting in LightRAG's QueryParam.

# Retrieval parameters
# top_k for search (number of items to retrieve)
SEARCH_TOP_K=40

# Search mode ("naive", "local", "global", "hybrid", "mix")
# hybrid: combine local and global search
# mix: combine knowledge graph and vector search
# naive: simple vector search
# local: community-based search
# global: global community search
SEARCH_MODE=mix

# Context budgeting (input-side token limits)
# Overall input context budget per query (entities + relations + chunks + system prompt)
MAX_TOTAL_TOKENS=30000

# Budgets for entity and relation contexts (input-side token limits; adjust as needed)
MAX_ENTITY_TOKENS=6000
MAX_RELATION_TOKENS=8000

# ==============================================================================
# Document File Extensions Settings
# ==============================================================================
# Comma-separated extensions to treat as document files
# Targets text files like design docs, README, specs, etc.
DOC_EXT_TEXT_FILES=txt,md,rst

# Comma-separated special filenames without extension
# Targets files like README, Changelog, etc.
DOC_EXT_SPECIAL_FILES=readme,changelog

# ==============================================================================
# Document Entity Extraction Settings
# ==============================================================================
# Comma-separated entity types to extract from documents
# These indicate entity types the LLM should focus on when analyzing documents.
# If entity merge is enabled, entities extracted from documents are merged with
# those extracted from code when their names are similar.
#
# Examples of entity type names:
#   - Class: class_name, class_definition, class_declaration
#   - Function: function_name, function_definition, function_declarator
#   - Method: method_name, method_definition, method_declaration
#   - Interface: interface_name, interface_declaration
#   - Namespace: namespace_name, namespace_definition
#   - Struct: struct_name, struct
#   - HTML style: html_style, style_tag
#   - HTML embedded script: html_script, script_tag
#
# Examples:
#   Default: DOC_DEFINITION_LIST=class_name,function_name,method_name
#   Detailed: DOC_DEFINITION_LIST=class_name,function_name,method_name,interface_name,namespace_name,struct_name
#   HTML: DOC_DEFINITION_LIST=html_style,html_script
DOC_DEFINITION_LIST=class_name,function_name,method_name

# ==============================================================================
# File/Directory Exclusion Settings
# ==============================================================================
# Comma-separated filenames/directories to exclude
# Default: NO_PROCESS_LIST=__pycache__,.git,.github,.venv,node_modules,.DS_Store,Thumbs.db,robots.txt,bac,backup,temp,tmp
# If empty, the default exclusion list is used.
NO_PROCESS_LIST=

# ==============================================================================
# Entity Merge Settings
# ==============================================================================
# Enable entity merge (true/false)
MERGE_ENABLED=true

# Cosine similarity threshold for entity merge
MERGE_SCORE_THRESHOLD=0.95

# Override per-category excluded entities for merging (advanced)
# If empty, defaults are used. Setting values overrides defaults.
#
# Category descriptions and default exclusion lists:
#
# MERGE_EXCLUDE_MAGIC_METHODS: Exclude special (magic) methods
# Default: __init__,__new__,__del__,__call__,__str__,__repr__,__len__,__getitem__,__setitem__,__delitem__,
#          __iter__,__next__,__contains__,__add__,__sub__,__mul__,__div__,__truediv__,__floordiv__,__mod__,
#          __pow__,__and__,__or__,__xor__,__lshift__,__rshift__,__neg__,__pos__,__abs__,__invert__,
#          __lt__,__le__,__eq__,__ne__,__gt__,__ge__,__hash__,__bool__,__getattr__,__setattr__,
#          __delattr__,__enter__,__exit__,__with__,__await__,__aiter__,__anext__
#
# MERGE_EXCLUDE_GENERIC_TERMS: Exclude overly-generic terms
# Default: data,result,value,item,element,object,instance,index,key,name,text,string,number,count,
#          size,length,width,height,temp,tmp,test,example,sample,demo,main,app,init,config,util,
#          helper,manager,handler,controller,service
#
# MERGE_EXCLUDE_TEST_RELATED: Exclude dummy names common in tests
# Default: foo,bar,baz,qux,spam,eggs,hello,world,mock,stub,fake,dummy
#
# Example: MERGE_EXCLUDE_GENERIC_TERMS=data,result,value,custom_app_term
MERGE_EXCLUDE_MAGIC_METHODS=
MERGE_EXCLUDE_GENERIC_TERMS=
MERGE_EXCLUDE_TEST_RELATED=

# Exclude private entities (starting with underscore) from merge (true/false)
MERGE_EXCLUDE_PRIVATE_ENTITIES_ENABLED=true

# Additional exclusion patterns for merge (optional)
# Wildcards supported: * (any string), ? (single character)
# Examples: 
#   Exact match: MERGE_EXCLUDE_CUSTOM_PATTERNS=myapp,myproject,custom_func
#   Wildcards: MERGE_EXCLUDE_CUSTOM_PATTERNS=test*,*temp,debug_*,*_mock
MERGE_EXCLUDE_CUSTOM_PATTERNS=

# Minimum entity name length (shorter names are excluded from merge)
MERGE_MIN_NAME_LENGTH=2

# Maximum entity name length (longer names are excluded from merge)
MERGE_MAX_NAME_LENGTH=50
